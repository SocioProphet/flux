import * as createExpression from "@/core/mutations/createExpression";
import { createProfile, dataURItoBlob, resizeImage } from "@/core/methods/createProfile";

const imageBase64 = "data:image/png;base64,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"

describe("Create Profile", () => {
  test("Create Profile - createProfile - Success", async () => {
    const mockExp = "QmUbmDdBMpv2vWa2kXPxcmcUtArLwAHQQgqvJ4XuDBfhtX://did:key:zQ3shYePYmPqfvWtPDuAiKUwkpPhgqSRuZurJiwH2VwdWpyWW";
    
    // @ts-ignore
    jest.spyOn(createExpression, "createExpression").mockResolvedValue(mockExp);

    const profile = await createProfile("QmUWgoGt6QAMfagvQkjsHN2X3egtu3P8bcqymYMjxnqFzQ", {
      username: "jhon",
      email: "jhon@test.com",
      givenName: "jhon",
      familyName: "doe",
      profilePicture: 'image',
      thumbnailPicture: 'image'
    });

    expect(profile).toBe(mockExp);
  });

  test("Create Profile - createProfile - Failure", async () => {
    // @ts-ignore
    jest.spyOn(createExpression, "createExpression").mockRejectedValue(Error("Couldn't create expression"));

    try {
      await createProfile("QmUWgoGt6QAMfagvQkjsHN2X3egtu3P8bcqymYMjxnqFzQ", {
        username: "jhon",
        email: "jhon@test.com",
        givenName: "jhon",
        familyName: "doe"
      });
    } catch (error) {
      expect(error).toBeInstanceOf(Error);
      expect(error).toHaveProperty(
        "message",
        "Error: Couldn't create expression"
      );
    }
  });
});